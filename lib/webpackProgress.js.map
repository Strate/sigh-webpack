{"version":3,"sources":["../src/webpackProgress.js"],"names":[],"mappings":";;;;;qBAAwB,kBAAkB;;AAA3B,SAAS,kBAAkB,GAAG;AAC3C,MAAI,KAAK,GAAG,CAAC;MAAE,SAAS;MAAE,aAAa,CAAC;AACxC,WAAS,aAAa,CAAC,WAAW,EAAE;AAClC,QAAI,GAAG,GAAG,EAAE,CAAC;AACb,WAAM,KAAK,GAAG,WAAW,CAAC,MAAM,EAAE,KAAK,EAAE,EAAE;AACzC,SAAG,IAAI,OAAO,CAAC;KAChB;AACD,SAAK,GAAG,WAAW,CAAC,MAAM,CAAC;AAC3B,SAAI,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,EAAE,CAAC,EAAE,EAAE;AAC7B,SAAG,IAAI,IAAI,CAAC;KACb;AACD,QAAG,GAAG,EAAE,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;GACnC;;AAED,SAAO,SAAS,eAAe,CAAC,UAAU,EAAE,GAAG,EAAE;AAC/C,QAAI,KAAK,GAAG,GAAG,CAAC;AAChB,QAAG,UAAU,GAAG,CAAC,EAAE;AACjB,gBAAU,GAAG,IAAI,CAAC,KAAK,CAAC,UAAU,GAAG,GAAG,CAAC,CAAC;AAC1C,SAAG,GAAG,UAAU,GAAG,IAAI,GAAG,GAAG,CAAC;AAC9B,UAAG,UAAU,GAAG,GAAG,EAAE;AACnB,WAAG,GAAG,GAAG,GAAG,GAAG,CAAC;OACjB;AACD,UAAG,UAAU,GAAG,EAAE,EAAE;AAClB,WAAG,GAAG,GAAG,GAAG,GAAG,CAAC;OACjB;KACF;;AAED,SAAK,GAAG,KAAK,CAAC,OAAO,CAAC,cAAc,EAAE,EAAE,CAAC,CAAC;AAC1C,QAAG,UAAU,KAAK,CAAC,EAAE;AACnB,eAAS,GAAG,IAAI,CAAC;AACjB,mBAAa,GAAG,CAAC,IAAI,IAAI,EAAE,CAAC;KAC7B,MAAM,IAAG,KAAK,KAAK,SAAS,IAAI,UAAU,KAAK,CAAC,EAAE;AACjD,UAAI,GAAG,GAAG,CAAC,IAAI,IAAI,EAAE,CAAC;AACtB,UAAG,SAAS,EAAE;AACZ,YAAI,QAAQ,GAAG,AAAC,GAAG,GAAG,aAAa,GAAI,KAAK,GAAG,SAAS,CAAC;AACzD,qBAAa,CAAC,QAAQ,CAAC,CAAC;AACxB,eAAO,CAAC,MAAM,CAAC,KAAK,CAAC,QAAQ,GAAG,IAAI,CAAC,CAAC;AACtC,aAAK,GAAG,CAAC,CAAC;OACX;AACD,eAAS,GAAG,KAAK,CAAC;AAClB,mBAAa,GAAG,GAAG,CAAC;KACrB;;AAED,iBAAa,CAAC,GAAG,CAAC,CAAC;AACnB,WAAO,CAAC,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;GAC3B,CAAA;CACF","file":"src/webpackProgress.js","sourcesContent":["export default function getProgressHandler() {\n  var chars = 0, lastState, lastStateTime;\n  function goToLineStart(nextMessage) {\n    var str = \"\";\n    for(; chars > nextMessage.length; chars--) {\n      str += \"\\b \\b\";\n    }\n    chars = nextMessage.length;\n    for(var i = 0; i < chars; i++) {\n      str += \"\\b\";\n    }\n    if(str) process.stderr.write(str);\n  }\n\n  return function progressHandler(percentage, msg) {\n    var state = msg;\n    if(percentage < 1) {\n      percentage = Math.floor(percentage * 100);\n      msg = percentage + \"% \" + msg;\n      if(percentage < 100) {\n        msg = \" \" + msg;\n      }\n      if(percentage < 10) {\n        msg = \" \" + msg;\n      }\n    }\n\n    state = state.replace(/^\\d+\\/\\d+\\s+/, \"\");\n    if(percentage === 0) {\n      lastState = null;\n      lastStateTime = +new Date();\n    } else if(state !== lastState || percentage === 1) {\n      var now = +new Date();\n      if(lastState) {\n        var stateMsg = (now - lastStateTime) + \"ms \" + lastState;\n        goToLineStart(stateMsg);\n        process.stderr.write(stateMsg + \"\\n\");\n        chars = 0;\n      }\n      lastState = state;\n      lastStateTime = now;\n    }\n\n    goToLineStart(msg);\n    process.stderr.write(msg);\n  }\n}\n"]}